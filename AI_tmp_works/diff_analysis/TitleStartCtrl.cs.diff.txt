Change Type: significant_change
ILSpy: g:\unity\OnoCoro2026\Assets\Recovery\.Editor\ILspy_CS\TitleStartCtrl.cs
Scripts: g:\unity\OnoCoro2026\Assets\Scripts\Stages\TitleStartCtrl.cs
================================================================================

--- TitleStartCtrl.cs+++ TitleStartCtrl.cs@@ -1,392 +1,570 @@-// Assembly-CSharp, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null
-// TitleStartCtrl
-using System;
 using System.Collections;
 using System.Collections.Generic;
-using System.Diagnostics;
-using System.IO;
-using CommonsUtility;
-using TMPro;
 using UnityEngine;
 using UnityEngine.SceneManagement;
+using CommonsUtility;
+using System;
+using System.Diagnostics;
 using UnityEngine.UI;
+using UnityEngine.EventSystems;
+using TMPro;
+using System.IO;
+using Debug = UnityEngine.Debug;
 
 public class TitleStartCtrl : MonoBehaviour
 {
-	private int _STAGE_SELECTOR_HEIGHT = 120;
-
-	private int _STAGE_EDITOR_HEIGHT = 60;
-
-	private int _STAGE_SELECTOR_MARGIN = 2;
-
-	private GameObject _pnlStageSelector;
-
-	private GameObject _pnlStageEditor;
-
-	private GameObject _pnlAboutThisGame;
-
-	private GameObject _pnlYAMLEditor;
-
-	private GameObject _loading;
-
-	private GameObject _StageScrollbar;
-
-	private GameObject _EditorScrollbar;
-
-	private const string _YAML_FILE_EXTENSION = ".yaml";
-
-	private const string _STAGE_LIST_FILE_NAME = "stagelist.csv";
-
-	private void OnClickGameClose()
-	{
-		base.gameObject.AddComponent<GameCtrl>().GameClose();
-	}
-
-	private void ClearContetArea(GameObject content)
-	{
-		int childCount = content.transform.childCount;
-		for (int i = 0; i < childCount; i++)
-		{
-			GameObjectTreat.DestroyAll(content.transform.GetChild(i).gameObject);
-		}
-	}
-
-	private void SetStageContents(GameObject content)
-	{
-		ClearContetArea(content);
-		GetSceneNames();
-		Dictionary<string, string[]> sceneDict = GetSceneDict();
-		foreach (KeyValuePair<string, string[]> item in sceneDict)
-		{
-			string key = item.Key;
-			string[] value = item.Value;
-			SetStageContent(content, key, value);
-		}
-		int count = sceneDict.Count;
-		content.GetComponent<RectTransform>().sizeDelta = new Vector2(0f, _STAGE_SELECTOR_HEIGHT * count + _STAGE_SELECTOR_MARGIN * (count - 1));
-	}
-
-	private void SetStageContent(GameObject content, string scenepath, string[] stageinfo)
-	{
-		GameObject gameObject = UnityEngine.Object.Instantiate(PrefabManager.UIStageSelectorPrefab, content.transform);
-		gameObject.name = "UIStageSelector";
-		gameObject.transform.Find("txtStageDisplayName").GetComponent<TextMeshProUGUI>().text = stageinfo[0];
-		gameObject.transform.Find("imgStageIcon").GetComponent<Image>().sprite = Resources.Load<Sprite>(stageinfo[1]);
-		gameObject.transform.Find("txtStageInfo").GetComponent<TextMeshProUGUI>().text = stageinfo[2];
-		gameObject.transform.Find("txtStagePath").GetComponent<Text>().text = scenepath;
-		Button btn = gameObject.GetComponent<Button>();
-		btn.onClick.AddListener(delegate
-		{
-			OnClickSelectStage(btn);
-		});
-	}
-
-	private void SetStageEditorContents(GameObject content)
-	{
-		ClearContetArea(content);
-		Dictionary<string, string[]> sceneDict = GetSceneDict();
-		foreach (KeyValuePair<string, string[]> item in sceneDict)
-		{
-			string key = item.Key;
-			string[] value = item.Value;
-			SetStageEditorContent(content, key, value);
-		}
-		int count = sceneDict.Count;
-		content.GetComponent<RectTransform>().sizeDelta = new Vector2(0f, _STAGE_EDITOR_HEIGHT * count + _STAGE_SELECTOR_MARGIN * (count - 1));
-	}
-
-	private void SetStageEditorContent(GameObject content, string scenepath, string[] stageinfo)
-	{
-		GameObject gameObject = UnityEngine.Object.Instantiate(PrefabManager.UIStageFileListPrefab, content.transform);
-		gameObject.name = "UIStageFileList";
-		gameObject.transform.Find("txtStageDisplayName").GetComponent<TextMeshProUGUI>().text = stageinfo[0];
-		gameObject.transform.Find("txtStagePath").GetComponent<Text>().text = scenepath;
-		Button btn = gameObject.GetComponent<Button>();
-		btn.onClick.AddListener(delegate
-		{
-			OnClickSelectEditStage(btn);
-		});
-	}
-
-	private void OnClickSelectEditStage(Button btnStageSelect)
-	{
-		Text component = btnStageSelect.transform.Find("txtStagePath").gameObject.GetComponent<Text>();
-		if (component == null || component.text == "")
-		{
-			UnityEngine.Debug.Log("StagePath is null");
-			return;
-		}
-		string fileName = Path.GetFileName(component.text + ".yaml");
-		string text = LoadStreamingAsset.AllTextStream(fileName);
-		if (text == null)
-		{
-			UnityEngine.Debug.Log("yaml is null");
-			return;
-		}
-		_pnlYAMLEditor.SetActive(value: true);
-		GameObject gameObject = GameObject.Find("tmpInputField");
-		if (gameObject == null)
-		{
-			UnityEngine.Debug.LogWarning("tmpInputField is not found");
-			return;
-		}
-		gameObject.GetComponent<TMP_InputField>().text = text;
-		GameObject.Find("txtYamlPath").GetComponent<Text>().text = LoadStreamingAsset.StageFilePath(fileName);
-	}
-
-	private void OnClickSelectStage(Button btnStageSelect)
-	{
-		btnStageSelect.interactable = false;
-		Text component = btnStageSelect.transform.Find("txtStagePath").gameObject.GetComponent<Text>();
-		if (component == null || component.text == "")
-		{
-			UnityEngine.Debug.Log("StagePath is null");
-			return;
-		}
-		string text = component.text;
-		if (IsScenePathValid(text))
-		{
-			_loading.SetActive(value: true);
-			StartCoroutine(LoadScene(text, 0.1f));
-		}
-		else
-		{
-			UnityEngine.Debug.LogWarning("Scene path not found: " + text);
-		}
-	}
-
-	private IEnumerator LoadScene(string scenename, float delay)
-	{
-		yield return new WaitForSeconds(delay);
-		SceneManager.LoadScene(scenename, LoadSceneMode.Single);
-	}
-
-	private string RemoveQuotesSafely(string input)
-	{
-		if (input.StartsWith("\"") && input.EndsWith("\""))
-		{
-			return input.Substring(1, input.Length - 2);
-		}
-		return input;
-	}
-
-	private Dictionary<string, string[]> GetSceneInfoDict()
-	{
-		Dictionary<string, string[]> dictionary = new Dictionary<string, string[]>();
-		string[] array = LoadStreamingAsset.CsvLines("stagelist.csv");
-		for (int i = 0; i < array.Length; i++)
-		{
-			string[] array2 = LoadStreamingAsset.CsvCols(array[i]);
-			if (array2.Length != 4)
-			{
-				UnityEngine.Debug.LogWarning("Invalid line format: " + array[i]);
-				continue;
-			}
-			dictionary.Add(array2[0], new string[3]
-			{
-				array2[1],
-				array2[2],
-				array2[3]
-			});
-		}
-		return dictionary;
-	}
-
-	private string[] GetSceneNames()
-	{
-		int sceneCountInBuildSettings = SceneManager.sceneCountInBuildSettings;
-		string[] array = new string[sceneCountInBuildSettings];
-		for (int i = 0; i < sceneCountInBuildSettings; i++)
-		{
-			string fileNameWithoutExtension = Path.GetFileNameWithoutExtension(SceneUtility.GetScenePathByBuildIndex(i));
-			array[i] = fileNameWithoutExtension;
-		}
-		return array;
-	}
-
-	private Dictionary<string, string[]> GetSceneDict()
-	{
-		string[] sceneNames = GetSceneNames();
-		string text = SceneManager.GetActiveScene().name;
-		Dictionary<string, string[]> sceneInfoDict = GetSceneInfoDict();
-		Dictionary<string, string[]> dictionary = new Dictionary<string, string[]>();
-		string[] array = new string[3] { "StageName", "StageIcon", "StageInfo" };
-		foreach (string text2 in sceneNames)
-		{
-			if (sceneInfoDict.ContainsKey(text2))
-			{
-				dictionary.Add(text2, sceneInfoDict[text2]);
-			}
-			else if (!(text2 == text) && !dictionary.ContainsKey(text2))
-			{
-				string[] array2 = (string[])array.Clone();
-				array2[0] = text2;
-				dictionary.Add(text2, array2);
-			}
-		}
-		return dictionary;
-	}
-
-	private bool IsScenePathValid(string scenename)
-	{
-		string[] sceneNames = GetSceneNames();
-		for (int i = 0; i < sceneNames.Length; i++)
-		{
-			if (scenename == sceneNames[i])
-			{
-				return true;
-			}
-		}
-		return false;
-	}
-
-	private void OnClickAboutGame()
-	{
-		_pnlAboutThisGame.SetActive(value: true);
-		TextMeshProUGUI component = GameObject.Find("tmpGameInfo").GetComponent<TextMeshProUGUI>();
-		TextAsset textAsset = Resources.Load("public_doc/aboutthisgame") as TextAsset;
-		if (textAsset == null)
-		{
-			UnityEngine.Debug.LogWarning("aboutthisgame.txt is not found");
-			return;
-		}
-		UnityEngine.Debug.Log("aboutthisgame " + textAsset.text);
-		component.text = textAsset.text;
-	}
-
-	private bool OpenYamlByNotePad()
-	{
-		string text = GameObject.Find("txtYamlPath").GetComponent<Text>().text;
-		if (File.Exists(text))
-		{
-			OpenFileInEditor(text);
-			return true;
-		}
-		return false;
-	}
-
-	private void OpenFileInDefaultProgram(string filepath)
-	{
-		if (File.Exists(filepath))
-		{
-			try
-			{
-				Process.Start(new ProcessStartInfo(filepath)
-				{
-					UseShellExecute = true
-				});
-				return;
-			}
-			catch (Exception ex)
-			{
-				UnityEngine.Debug.LogError("ファイルを開けませんでした: " + filepath + "\nエラー: " + ex.Message);
-				return;
-			}
-		}
-		UnityEngine.Debug.LogWarning("ファイルが存在しません: " + filepath);
-	}
-
-	private void OpenFileInEditor(string filepath)
-	{
-		if (Application.platform == RuntimePlatform.WindowsPlayer || Application.platform == RuntimePlatform.WindowsEditor)
-		{
-			Process.Start("notepad.exe", filepath);
-		}
-		else if (Application.platform == RuntimePlatform.OSXPlayer || Application.platform == RuntimePlatform.OSXEditor)
-		{
-			Process.Start("open", "-a TextEdit " + filepath);
-		}
-		else if (Application.platform == RuntimePlatform.LinuxPlayer)
-		{
-			Process.Start("xdg-open", filepath);
-		}
-		else
-		{
-			UnityEngine.Debug.LogError("Unsupported platform");
-		}
-	}
-
-	private void OnClickBugReport()
-	{
-		string text = "https://forms.gle/CdvySsxeXMDAigTQ9";
-		UnityEngine.Debug.Log("OnClickBugReport " + text);
-		Application.OpenURL(text);
-	}
-
-	private void OnClickYamlEdit()
-	{
-		OpenYamlByNotePad();
-		_pnlStageEditor.SetActive(value: false);
-		_pnlYAMLEditor.SetActive(value: false);
-	}
-
-	private void OnClickStageSelect()
-	{
-		SetScrollbarTopPosition(_StageScrollbar);
-		_pnlStageEditor.SetActive(value: false);
-		_pnlStageSelector.SetActive(!_pnlStageSelector.activeSelf);
-	}
-
-	private void OnClickStageEditor()
-	{
-		SetScrollbarTopPosition(_EditorScrollbar);
-		_pnlStageSelector.SetActive(value: false);
-		_pnlStageEditor.SetActive(!_pnlStageEditor.activeSelf);
-	}
-
-	private void SetScrollbarTopPosition(GameObject scrollbar)
-	{
-		if (!(scrollbar == null))
-		{
-			scrollbar.GetComponent<Scrollbar>().value = 1f;
-		}
-	}
-
-	private void Awake()
-	{
-		_loading = GameObject.Find("nowloading");
-		_loading.SetActive(value: false);
-		_loading.GetComponent<Canvas>().planeDistance = 100f;
-		GameObject.Find("btnGameClose").GetComponent<Button>().onClick.AddListener(delegate
-		{
-			OnClickGameClose();
-		});
-		GameObject.Find("btnAboutGame").GetComponent<Button>().onClick.AddListener(delegate
-		{
-			OnClickAboutGame();
-		});
-		GameObject.Find("btnStageEditor").GetComponent<Button>().onClick.AddListener(delegate
-		{
-			OnClickStageEditor();
-		});
-		GameObject.Find("btnStage").GetComponent<Button>().onClick.AddListener(delegate
-		{
-			OnClickStageSelect();
-		});
-		GameObject.Find("btnYamlEdit").GetComponent<Button>().onClick.AddListener(delegate
-		{
-			OnClickYamlEdit();
-		});
-		GameObject.Find("btnBugReport").GetComponent<Button>().onClick.AddListener(delegate
-		{
-			OnClickBugReport();
-		});
-		GameObject stageContents = GameObject.Find("pnlStageSelector/Scroll View/Viewport/Content");
-		SetStageContents(stageContents);
-		_StageScrollbar = GameObject.Find("pnlStageSelector/Scroll View/Scrollbar Vertical");
-		SetScrollbarTopPosition(_StageScrollbar);
-		GameObject stageEditorContents = GameObject.Find("pnlStageEditor/Scroll View/Viewport/Content");
-		SetStageEditorContents(stageEditorContents);
-		_EditorScrollbar = GameObject.Find("pnlStageEditor/Scroll View/Scrollbar Vertical");
-		SetScrollbarTopPosition(_EditorScrollbar);
-		GameObject.Find("txtVersionInfo").GetComponent<TextMeshProUGUI>().text = "version:" + GameObjectTreat.GetAppBuildDate();
-		_pnlStageSelector = GameObject.Find("pnlStageSelector");
-		_pnlStageSelector.SetActive(value: false);
-		_pnlStageEditor = GameObject.Find("pnlStageEditor");
-		_pnlStageEditor.SetActive(value: false);
-		_pnlAboutThisGame = GameObject.Find("pnlAboutThisGame");
-		_pnlAboutThisGame.SetActive(value: false);
-		_pnlYAMLEditor = GameObject.Find("pnlYAMLEditor");
-		_pnlYAMLEditor.SetActive(value: false);
-	}
+    // UI Layout Constants
+    private int _STAGE_SELECTOR_HEIGHT = 120;
+    private int _STAGE_EDITOR_HEIGHT = 60;
+    private int _STAGE_SELECTOR_MARGIN = 2;
+    
+    // File Constants
+    private const string _YAML_FILE_EXTENSION = ".yaml";
+    private const string _STAGE_LIST_FILE_NAME = "public_doc/stagelist.csv";
+    private const string _ABOUT_GAME_FILE_NAME = "aboutthisgame.txt";
+    
+    // URL Constants
+    private const string _BUG_REPORT_URL = "https://forms.gle/CdvySsxeXMDAigTQ9";
+    
+    // GameObject Names
+    private const string _OBJ_LOADING = "nowloading";
+    private const string _OBJ_BTN_GAME_CLOSE = "btnGameClose";
+    private const string _OBJ_BTN_ABOUT_GAME = "btnAboutGame";
+    private const string _OBJ_BTN_STAGE_EDITOR = "btnStageEditor";
+    private const string _OBJ_BTN_STAGE = "btnStage";
+    private const string _OBJ_BTN_YAML_EDIT = "btnYamlEdit";
+    private const string _OBJ_BTN_BUG_REPORT = "btnBugReport";
+    private const string _OBJ_PNL_STAGE_SELECTOR = "pnlStageSelector";
+    private const string _OBJ_PNL_STAGE_EDITOR = "pnlStageEditor";
+    private const string _OBJ_PNL_ABOUT_THIS_GAME = "pnlAboutThisGame";
+    private const string _OBJ_PNL_YAML_EDITOR = "pnlYAMLEditor";
+    private const string _OBJ_TXT_VERSION_INFO = "txtVersionInfo";
+    private const string _OBJ_TMP_GAME_INFO = "tmpGameInfo";
+    private const string _OBJ_TMP_INPUT_FIELD = "tmpInputField";
+    private const string _OBJ_TXT_YAML_PATH = "txtYamlPath";
+    
+    // GameObject Path Constants
+    private const string _PATH_STAGE_SELECTOR_CONTENT = "pnlStageSelector/Scroll View/Viewport/Content";
+    private const string _PATH_STAGE_SELECTOR_SCROLLBAR = "pnlStageSelector/Scroll View/Scrollbar Vertical";
+    private const string _PATH_STAGE_EDITOR_CONTENT = "pnlStageEditor/Scroll View/Viewport/Content";
+    private const string _PATH_STAGE_EDITOR_SCROLLBAR = "pnlStageEditor/Scroll View/Scrollbar Vertical";
+    
+    // Prefab Child Element Names
+    private const string _CHILD_TXT_STAGE_DISPLAY_NAME = "txtStageDisplayName";
+    private const string _CHILD_IMG_STAGE_ICON = "imgStageIcon";
+    private const string _CHILD_TXT_STAGE_INFO = "txtStageInfo";
+    private const string _CHILD_TXT_STAGE_PATH = "txtStagePath";
+    
+    // Instance Names
+    private const string _INSTANCE_UI_STAGE_SELECTOR = "UIStageSelector";
+    private const string _INSTANCE_UI_STAGE_FILE_LIST = "UIStageFileList";
+    
+    // Editor Commands
+    private const string _EDITOR_WINDOWS = "notepad.exe";
+    private const string _EDITOR_MAC = "open";
+    private const string _EDITOR_MAC_ARGS = "-a TextEdit ";
+    private const string _EDITOR_LINUX = "xdg-open";
+    
+    // UI Messages
+    private const string _MSG_STAGE_PATH_NULL = "StagePath is null";
+    private const string _MSG_YAML_NULL = "yaml is null";
+    private const string _MSG_TMP_INPUT_NOT_FOUND = "tmpInputField is not found";
+    private const string _MSG_SCENE_PATH_NOT_FOUND = "Scene path not found: ";
+    private const string _MSG_INVALID_LINE_FORMAT = "Invalid line format: ";
+    private const string _MSG_ABOUT_GAME_NOT_FOUND = "aboutthisgame.txt is not found";
+    private const string _MSG_ABOUT_GAME_ERROR = "ゲーム情報ファイルが見つかりませんでした。";
+    private const string _MSG_ABOUT_GAME_LOADED = "aboutthisgame loaded";
+    private const string _MSG_FILE_OPEN_ERROR = "ファイルを開けませんでした: ";
+    private const string _MSG_FILE_NOT_EXIST = "ファイルが存在しません: ";
+    private const string _MSG_UNSUPPORTED_PLATFORM = "Unsupported platform";
+    private const string _MSG_BUG_REPORT_LOG = "OnClickBugReport ";
+    
+    // Numeric Constants
+    private const float _CANVAS_PLANE_DISTANCE = 100f;
+    private const float _SCENE_LOAD_DELAY = 0.1f;
+    private const float _SCROLLBAR_TOP_VALUE = 1f;
+    
+    // Text Format Constants
+    private const string _VERSION_PREFIX = "version:";
+    
+    // Private Fields
+    private GameObject _pnlStageSelector;
+    private GameObject _pnlStageEditor;
+    private GameObject _pnlAboutThisGame;
+    private GameObject _pnlYAMLEditor;
+    private GameObject _loading;
+    private GameObject _StageScrollbar;
+    private GameObject _EditorScrollbar;
+
+    // GameTutorial
+
+    private void OnClickGameClose()
+    {
+        // Debug.Log("OnClickGameClose");
+        GameCtrl gameCtrl = this.gameObject.AddComponent<GameCtrl>();
+        gameCtrl.GameClose();
+    }
+
+    private void ClearContetArea(GameObject content)
+    {
+        int childCount = content.transform.childCount;
+        for (int i = 0; i < childCount; i++)
+        {
+            GameObjectTreat.DestroyAll(content.transform.GetChild(i).gameObject);
+        }
+    }
+
+    private void SetStageContents(GameObject content)
+    {
+        ClearContetArea(content);
+        GetSceneNames();
+        Dictionary<string, string[]> sceneDict = GetSceneDict();
+        foreach (KeyValuePair<string, string[]> item in sceneDict)
+        {
+            string key = item.Key;
+            string[] value = item.Value;
+            SetStageContent(content, key, value);
+        }
+        int count = sceneDict.Count;
+        content.GetComponent<RectTransform>().sizeDelta = new Vector2(0f, _STAGE_SELECTOR_HEIGHT * count + _STAGE_SELECTOR_MARGIN * (count - 1));
+    }
+
+    private void SetStageContent(GameObject content, string scenepath, string[] stageinfo)
+    {
+        GameObject gameObject = UnityEngine.Object.Instantiate(PrefabManager.UIStageSelectorPrefab, content.transform);
+        gameObject.name = _INSTANCE_UI_STAGE_SELECTOR;
+        gameObject.transform.Find(_CHILD_TXT_STAGE_DISPLAY_NAME).GetComponent<TextMeshProUGUI>().text = stageinfo[0];
+        gameObject.transform.Find(_CHILD_IMG_STAGE_ICON).GetComponent<Image>().sprite = Resources.Load<Sprite>(stageinfo[1]);
+        gameObject.transform.Find(_CHILD_TXT_STAGE_INFO).GetComponent<TextMeshProUGUI>().text = stageinfo[2];
+        gameObject.transform.Find(_CHILD_TXT_STAGE_PATH).GetComponent<Text>().text = scenepath;
+        Button btn = gameObject.GetComponent<Button>();
+        btn.onClick.AddListener(delegate
+        {
+            OnClickSelectStage(btn);
+        });
+    }
+
+    private void SetStageEditorContents(GameObject content)
+    {
+        ClearContetArea(content);
+        Dictionary<string, string[]> sceneDict = GetSceneDict();
+        foreach (KeyValuePair<string, string[]> item in sceneDict)
+        {
+            string key = item.Key;
+            string[] value = item.Value;
+            SetStageEditorContent(content, key, value);
+        }
+        int count = sceneDict.Count;
+        content.GetComponent<RectTransform>().sizeDelta = new Vector2(0f, _STAGE_EDITOR_HEIGHT * count + _STAGE_SELECTOR_MARGIN * (count - 1));
+    }
+
+    private void SetStageEditorContent(GameObject content, string scenepath, string[] stageinfo)
+    {
+        GameObject gameObject = UnityEngine.Object.Instantiate(PrefabManager.UIStageFileListPrefab, content.transform);
+        gameObject.name = _INSTANCE_UI_STAGE_FILE_LIST;
+        gameObject.transform.Find(_CHILD_TXT_STAGE_DISPLAY_NAME).GetComponent<TextMeshProUGUI>().text = stageinfo[0];
+        gameObject.transform.Find(_CHILD_TXT_STAGE_PATH).GetComponent<Text>().text = scenepath;
+        Button btn = gameObject.GetComponent<Button>();
+        btn.onClick.AddListener(delegate
+        {
+            OnClickSelectEditStage(btn);
+        });
+    }
+
+    private void OnClickSelectEditStage(Button btnStageSelect)
+    {
+        Text component = btnStageSelect.transform.Find(_CHILD_TXT_STAGE_PATH).gameObject.GetComponent<Text>();
+        if (component == null || component.text == "")
+        {
+            Debug.Log(_MSG_STAGE_PATH_NULL);
+            return;
+        }
+        string fileName = Path.GetFileName(component.text + _YAML_FILE_EXTENSION);
+        string text = LoadStreamingAsset.AllTextStream(fileName);
+        if (text == null)
+        {
+            Debug.Log(_MSG_YAML_NULL);
+            return;
+        }
+        _pnlYAMLEditor.SetActive(value: true);
+        GameObject gameObject = GameObject.Find(_OBJ_TMP_INPUT_FIELD);
+        if (gameObject == null)
+        {
+            Debug.LogWarning(_MSG_TMP_INPUT_NOT_FOUND);
+            return;
+        }
+        gameObject.GetComponent<TMP_InputField>().text = text;
+        GameObject.Find(_OBJ_TXT_YAML_PATH).GetComponent<Text>().text = LoadStreamingAsset.StageFilePath(fileName);
+    }
+
+    private void OnClickSelectStage(Button btnStageSelect)
+    {
+        btnStageSelect.interactable = false;
+        Text component = btnStageSelect.transform.Find(_CHILD_TXT_STAGE_PATH).gameObject.GetComponent<Text>();
+        if (component == null || component.text == "")
+        {
+            Debug.Log(_MSG_STAGE_PATH_NULL);
+            return;
+        }
+        string text = component.text;
+        if (IsScenePathValid(text))
+        {
+            _loading.SetActive(value: true);
+            StartCoroutine(LoadScene(text, _SCENE_LOAD_DELAY));
+        }
+        else
+        {
+            Debug.LogWarning(_MSG_SCENE_PATH_NOT_FOUND + text);
+        }
+    }
+
+    private IEnumerator LoadScene(string scenename, float delay)
+    {
+        yield return new WaitForSeconds(delay);
+        SceneManager.LoadScene(scenename, LoadSceneMode.Single);
+    }
+
+    private string RemoveQuotesSafely(string input)
+    {
+        if (input.StartsWith("\"") && input.EndsWith("\""))
+        {
+            return input.Substring(1, input.Length - 2);
+        }
+        return input;
+    }
+
+    private Dictionary<string, string[]> GetSceneInfoDict()
+    {
+        Dictionary<string, string[]> dictionary = new Dictionary<string, string[]>();
+        string[] array = LoadStreamingAsset.CsvLines(_STAGE_LIST_FILE_NAME);
+        for (int i = 0; i < array.Length; i++)
+        {
+            string[] array2 = LoadStreamingAsset.CsvCols(array[i]);
+            if (array2.Length != 4)
+            {
+                Debug.LogWarning(_MSG_INVALID_LINE_FORMAT + array[i]);
+                continue;
+            }
+            dictionary.Add(array2[0], new string[3]
+            {
+                array2[1],
+                array2[2],
+                array2[3]
+            });
+        }
+        return dictionary;
+    }
+
+    private string[] GetSceneNames()
+    {
+        int sceneCountInBuildSettings = SceneManager.sceneCountInBuildSettings;
+        string[] array = new string[sceneCountInBuildSettings];
+        for (int i = 0; i < sceneCountInBuildSettings; i++)
+        {
+            string fileNameWithoutExtension = Path.GetFileNameWithoutExtension(SceneUtility.GetScenePathByBuildIndex(i));
+            array[i] = fileNameWithoutExtension;
+        }
+        return array;
+    }
+
+    private Dictionary<string, string[]> GetSceneDict()
+    {
+        string[] sceneNames = GetSceneNames();
+        string text = SceneManager.GetActiveScene().name;
+        Dictionary<string, string[]> sceneInfoDict = GetSceneInfoDict();
+        Dictionary<string, string[]> dictionary = new Dictionary<string, string[]>();
+        string[] array = new string[3] { "StageName", "StageIcon", "StageInfo" };
+        foreach (string text2 in sceneNames)
+        {
+            if (sceneInfoDict.ContainsKey(text2))
+            {
+                dictionary.Add(text2, sceneInfoDict[text2]);
+            }
+            else if (!(text2 == text) && !dictionary.ContainsKey(text2))
+            {
+                string[] array2 = (string[])array.Clone();
+                array2[0] = text2;
+                dictionary.Add(text2, array2);
+            }
+        }
+        return dictionary;
+    }
+
+    private bool IsScenePathValid(string scenename)
+    {
+        string[] sceneNames = GetSceneNames();
+        for (int i = 0; i < sceneNames.Length; i++)
+        {
+            if (scenename == sceneNames[i])
+            {
+                return true;
+            }
+        }
+        return false;
+    }
+
+    private void OnClickAboutGame()
+    {
+        _pnlAboutThisGame.SetActive(value: true);
+        TextMeshProUGUI component = GameObject.Find(_OBJ_TMP_GAME_INFO).GetComponent<TextMeshProUGUI>();
+        string text = LoadStreamingAsset.AllTextStream(_ABOUT_GAME_FILE_NAME);
+        if (text == null)
+        {
+            Debug.LogWarning(_MSG_ABOUT_GAME_NOT_FOUND);
+            component.text = _MSG_ABOUT_GAME_ERROR;
+            return;
+        }
+        Debug.Log(_MSG_ABOUT_GAME_LOADED);
+        component.text = text;
+    }
+
+    private bool OpenYamlByNotePad()
+    {
+        string text = GameObject.Find(_OBJ_TXT_YAML_PATH).GetComponent<Text>().text;
+        if (File.Exists(text))
+        {
+            OpenFileInEditor(text);
+            return true;
+        }
+        return false;
+    }
+
+    private void OpenFileInDefaultProgram(string filepath)
+    {
+        if (File.Exists(filepath))
+        {
+            try
+            {
+                Process.Start(new ProcessStartInfo(filepath)
+                {
+                    UseShellExecute = true
+                });
+                return;
+            }
+            catch (Exception ex)
+            {
+                Debug.LogError(_MSG_FILE_OPEN_ERROR + filepath + "\nエラー: " + ex.Message);
+                return;
+            }
+        }
+        Debug.LogWarning(_MSG_FILE_NOT_EXIST + filepath);
+    }
+
+    private void OpenFileInEditor(string filepath)
+    {
+        if (Application.platform == RuntimePlatform.WindowsPlayer || Application.platform == RuntimePlatform.WindowsEditor)
+        {
+            Process.Start(_EDITOR_WINDOWS, filepath);
+        }
+        else if (Application.platform == RuntimePlatform.OSXPlayer || Application.platform == RuntimePlatform.OSXEditor)
+        {
+            Process.Start(_EDITOR_MAC, _EDITOR_MAC_ARGS + filepath);
+        }
+        else if (Application.platform == RuntimePlatform.LinuxPlayer)
+        {
+            Process.Start(_EDITOR_LINUX, filepath);
+        }
+        else
+        {
+            Debug.LogError(_MSG_UNSUPPORTED_PLATFORM);
+        }
+    }
+
+    private void OnClickBugReport()
+    {
+        Debug.Log(_MSG_BUG_REPORT_LOG + _BUG_REPORT_URL);
+        Application.OpenURL(_BUG_REPORT_URL);
+    }
+
+    private void OnClickYamlEdit()
+    {
+        OpenYamlByNotePad();
+        _pnlStageEditor.SetActive(value: false);
+        _pnlYAMLEditor.SetActive(value: false);
+    }
+
+    private void OnClickStageEditor()
+    {
+        SetScrollbarTopPosition(_EditorScrollbar);
+        _pnlStageSelector.SetActive(value: false);
+        _pnlStageEditor.SetActive(!_pnlStageEditor.activeSelf);
+    }
+
+    private void SetScrollbarTopPosition(GameObject scrollbar)
+    {
+        if (!(scrollbar == null))
+        {
+            scrollbar.GetComponent<Scrollbar>().value = _SCROLLBAR_TOP_VALUE;
+        }
+    }
+
+    private void OnClickStageSelect()
+    {
+        SetScrollbarTopPosition(_StageScrollbar);
+        _pnlStageEditor.SetActive(value: false);
+        _pnlStageSelector.SetActive(!_pnlStageSelector.activeSelf);
+    }
+
+    void Awake()
+    {
+        List<string> missingObjects = new List<string>();
+        
+        InitializeLoadingCanvas(missingObjects);
+        InitializePanels(missingObjects);
+        RegisterButtonListeners(missingObjects);
+        InitializeStageContents(missingObjects);
+        InitializeVersionInfo(missingObjects);
+        CheckRuntimeObjects(missingObjects);
+        
+        CheckMissingObjects(missingObjects);
+    }
+
+    private void InitializeLoadingCanvas(List<string> missingObjects)
+    {
+        _loading = GameObject.Find(_OBJ_LOADING);
+        if (_loading == null)
+        {
+            GameObject loadingPrefab = Resources.Load<GameObject>("Prefabs/UI/nowloading");
+            if (loadingPrefab != null)
+            {
+                _loading = UnityEngine.Object.Instantiate(loadingPrefab);
+                _loading.name = _OBJ_LOADING;
+            }
+            else
+            {
+                missingObjects.Add(_OBJ_LOADING);
+                return;
+            }
+        }
+        _loading.SetActive(value: false);
+        if (_loading.GetComponent<Canvas>() != null)
+        {
+            _loading.GetComponent<Canvas>().planeDistance = _CANVAS_PLANE_DISTANCE;
+        }
+    }
+
+    private void InitializePanels(List<string> missingObjects)
+    {
+        _pnlStageSelector = FindAndSetupPanel(_OBJ_PNL_STAGE_SELECTOR, missingObjects);
+        _pnlStageEditor = FindAndSetupPanel(_OBJ_PNL_STAGE_EDITOR, missingObjects);
+        _pnlAboutThisGame = FindAndSetupPanel(_OBJ_PNL_ABOUT_THIS_GAME, missingObjects);
+        _pnlYAMLEditor = FindAndSetupPanel(_OBJ_PNL_YAML_EDITOR, missingObjects);
+    }
+
+    private GameObject FindAndSetupPanel(string panelName, List<string> missingObjects)
+    {
+        GameObject panel = GameObject.Find(panelName);
+        if (panel == null)
+        {
+            missingObjects.Add(panelName);
+        }
+        else
+        {
+            panel.SetActive(value: false);
+        }
+        return panel;
+    }
+
+    private void RegisterButtonListeners(List<string> missingObjects)
+    {
+        RegisterButton(_OBJ_BTN_GAME_CLOSE, OnClickGameClose, missingObjects);
+        RegisterButton(_OBJ_BTN_ABOUT_GAME, OnClickAboutGame, missingObjects);
+        RegisterButton(_OBJ_BTN_STAGE_EDITOR, OnClickStageEditor, missingObjects);
+        RegisterButton(_OBJ_BTN_STAGE, OnClickStageSelect, missingObjects);
+        RegisterButton(_OBJ_BTN_YAML_EDIT, OnClickYamlEdit, missingObjects);
+        RegisterButton(_OBJ_BTN_BUG_REPORT, OnClickBugReport, missingObjects);
+    }
+
+    private void RegisterButton(string buttonName, UnityEngine.Events.UnityAction action, List<string> missingObjects)
+    {
+        GameObject buttonObj = GameObject.Find(buttonName);
+        if (buttonObj == null)
+        {
+            missingObjects.Add(buttonName);
+            return;
+        }
+        
+        Button buttonComponent = buttonObj.GetComponent<Button>();
+        if (buttonComponent != null)
+        {
+            buttonComponent.onClick.AddListener(action);
+        }
+    }
+
+    private void InitializeStageContents(List<string> missingObjects)
+    {
+        GameObject stageContents = FindAndInitialize(_PATH_STAGE_SELECTOR_CONTENT, SetStageContents, missingObjects);
+        _StageScrollbar = FindAndInitialize(_PATH_STAGE_SELECTOR_SCROLLBAR, SetScrollbarTopPosition, missingObjects);
+        GameObject stageEditorContents = FindAndInitialize(_PATH_STAGE_EDITOR_CONTENT, SetStageEditorContents, missingObjects);
+        _EditorScrollbar = FindAndInitialize(_PATH_STAGE_EDITOR_SCROLLBAR, SetScrollbarTopPosition, missingObjects);
+    }
+
+    private GameObject FindAndInitialize(string objectPath, System.Action<GameObject> initializeAction, List<string> missingObjects)
+    {
+        GameObject obj = GameObject.Find(objectPath);
+        if (obj == null)
+        {
+            missingObjects.Add(objectPath);
+        }
+        else
+        {
+            initializeAction(obj);
+        }
+        return obj;
+    }
+
+    private void InitializeVersionInfo(List<string> missingObjects)
+    {
+        GameObject txtVersionInfo = GameObject.Find(_OBJ_TXT_VERSION_INFO);
+        if (txtVersionInfo == null)
+        {
+            missingObjects.Add(_OBJ_TXT_VERSION_INFO);
+        }
+        else
+        {
+            TextMeshProUGUI textComponent = txtVersionInfo.GetComponent<TextMeshProUGUI>();
+            if (textComponent != null)
+            {
+                textComponent.SetText(_VERSION_PREFIX + GameObjectTreat.GetAppBuildDate());
+            }
+        }
+    }
+
+    private void CheckRuntimeObjects(List<string> missingObjects)
+    {
+        if (GameObject.Find(_OBJ_TMP_INPUT_FIELD) == null)
+        {
+            missingObjects.Add(_OBJ_TMP_INPUT_FIELD + " (pnlYAMLEditor内)");
+        }
+        if (GameObject.Find(_OBJ_TXT_YAML_PATH) == null)
+        {
+            missingObjects.Add(_OBJ_TXT_YAML_PATH + " (pnlYAMLEditor内)");
+        }
+        if (GameObject.Find(_OBJ_TMP_GAME_INFO) == null)
+        {
+            missingObjects.Add(_OBJ_TMP_GAME_INFO + " (pnlAboutThisGame内)");
+        }
+    }
+
+    private void CheckMissingObjects(List<string> missingObjects)
+    {
+        if (missingObjects.Count > 0)
+        {
+            Debug.LogError("=== 以下のGameObjectがシーンに存在しません ===");
+            foreach (string objName in missingObjects)
+            {
+                Debug.LogError("  - " + objName);
+            }
+            Debug.LogError("=== 合計 " + missingObjects.Count + " 個のオブジェクトが不足しています ===");
+        }
+    }
+
+
+
+
+    // Update is called once per frame
+    void Update()
+    {
+        
+    }
 }


================================================================================
Significant Changes: 826
-	private int _STAGE_SELECTOR_HEIGHT = 120;

-	private int _STAGE_EDITOR_HEIGHT = 60;

-	private int _STAGE_SELECTOR_MARGIN = 2;

-	private GameObject _pnlStageSelector;

-	private GameObject _pnlStageEditor;

-	private GameObject _pnlAboutThisGame;

-	private GameObject _pnlYAMLEditor;

-	private GameObject _loading;

-	private GameObject _StageScrollbar;

-	private GameObject _EditorScrollbar;

-	private const string _YAML_FILE_EXTENSION = ".yaml";

-	private const string _STAGE_LIST_FILE_NAME = "stagelist.csv";

-	private void OnClickGameClose()

-	{

-		base.gameObject.AddComponent<GameCtrl>().GameClose();

-	}

-	private void ClearContetArea(GameObject content)

-	{

-		int childCount = content.transform.childCount;

-		for (int i = 0; i < childCount; i++)

